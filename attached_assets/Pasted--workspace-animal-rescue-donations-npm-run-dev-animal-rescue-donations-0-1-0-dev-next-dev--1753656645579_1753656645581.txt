~/workspace/animal-rescue-donations$ npm run dev

> animal-rescue-donations@0.1.0 dev
> next dev

  â–² Next.js 14.2.28
  - Local:        http://localhost:3000
  - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 2s
 â—‹ Compiling / ...
 âœ“ Compiled / in 12.1s (8582 modules)
 GET / 200 in 12866ms
 âœ“ Compiled in 1314ms (4184 modules)
 HEAD / 200 in 34ms
 GET / 200 in 29ms
 HEAD / 200 in 28ms
 â—‹ Compiling /api/chat ...
 âœ“ Compiled /api/chat in 1568ms (4635 modules)
[ğŸ§  AI Intent] AI detected general question, switching modes
[ğŸ§  Barkr] Final context: general
[ğŸ§  GPT Parser] No clear breed or location found in: hi barkr
[âš ï¸ Barkr] Invalid breed in memory, wiping: null
[âš ï¸ Barkr] Invalid location in memory, wiping: null
[ğŸ§  Final Decision] aiIntent: general, context: general, isAdoptionMode: false
 POST /api/chat 200 in 5132ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ“ Normalized Location] Boston, MA
[ğŸ¾ Barkr Memory] {
  location: 'Boston, MA',
  breed: 'chihuahuas',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Boston, MA', breed: 'chihuahuas' }
[ğŸ§  Breed Normalization] Input: chihuahuas â†’ Cleaned: Chihuahua
[âœ… Fallback Breed Match] "Chihuahua" â†’ "Chihuahua"
[âœ… Breed Match Success] Matched to: Chihuahua
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Chihuahua
[ğŸ—„ï¸ Database] Filtering by location: Boston, MA
[âœ… Database] Found 6 dogs in database
[ğŸ” Petfinder] Database returned only 6 dogs, searching Petfinder for additional...
 â—‹ Compiling /api/petfinder/search ...
 âœ“ Compiled /api/petfinder/search in 1040ms (4638 modules)
[ğŸ” /api/petfinder/search] Starting search request
[ğŸ“‹ Raw Input] { location: 'Boston, MA', breed: 'Chihuahua' }
[ğŸ’¾ Database] Trying database search first...
[âœ… Database Hit] Found 6 dogs in database
 POST /api/petfinder/search 200 in 1234ms
[âœ… Search Complete] Total unique dogs: 6 Petfinder duplicates removed: 6 Showing: 6
[âœ… Search Complete] Total unique dogs: 6 Showing: 6
[ğŸ“Š Scores] Sample scores: [ 'Catalina: 92', 'Binxy: 80', 'Oso: 80' ]
 POST /api/chat 200 in 3441ms
 GET / 200 in 457ms
 HEAD / 200 in 21ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ§¼ Final Cleaned Location] Austin, TX
[ğŸ“ Normalized Location] Austin, TX
[ğŸ¾ Barkr Memory] {
  location: 'Austin, TX',
  breed: 'chihuahuas',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Austin, TX', breed: 'chihuahuas' }
[ğŸ§  Breed Normalization] Input: chihuahuas â†’ Cleaned: Chihuahua
[âœ… Fallback Breed Match] "Chihuahua" â†’ "Chihuahua"
[âœ… Breed Match Success] Matched to: Chihuahua
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Chihuahua
[ğŸ—„ï¸ Database] Filtering by location: Austin, TX
[âœ… Database] Found 9 dogs in database
[ğŸ” Petfinder] Database returned only 9 dogs, searching Petfinder for additional...
[ğŸ” /api/petfinder/search] Starting search request
[ğŸ“‹ Raw Input] { location: 'Austin, TX', breed: 'Chihuahua' }
[ğŸ’¾ Database] Trying database search first...
[âœ… Database Hit] Found 11 dogs in database
 POST /api/petfinder/search 200 in 248ms
[âœ… Search Complete] Total unique dogs: 11 Petfinder duplicates removed: 9 Showing: 10
[âœ… Search Complete] Total unique dogs: 11 Showing: 10
[ğŸ“Š Scores] Sample scores: [ 'Thomas: 94', 'The Chad: 94', 'Daxter: 94' ]
 POST /api/chat 200 in 2350ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ§  GPT Parser] No clear breed or location found in: more dogs please
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ¾ More Request] Processing more dogs request
[ğŸ¾ Memory Check] Cached dogs count: 11
[ğŸ¾ Memory Check] Seen dogs count: 10
[ğŸ¾ Memory Check] Location: Austin, TX
[ğŸ¾ Memory Check] Breed: chihuahuas
[ğŸ¾ Using Cache] Found cached dogs, checking for unseen ones...
[ğŸ¾ Filter Check] Unseen dogs count: 1
[ğŸ¾ Showing] Displaying 1 more dogs from cache
 POST /api/chat 200 in 1718ms
 GET / 200 in 27ms
 HEAD / 200 in 20ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ§¼ Final Cleaned Location] Denver, CO
[ğŸ“ Normalized Location] Denver, CO
[ğŸ¾ Barkr Memory] {
  location: 'Denver, CO',
  breed: 'jack russells',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Denver, CO', breed: 'jack russells' }
[ğŸ§  Breed Normalization] Input: jack russells â†’ Cleaned: Jack Russell
[âœ… Fallback Breed Match] "Jack Russell" â†’ "Jack Russell Terrier"
[âœ… Breed Match Success] Matched to: Jack Russell Terrier
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Jack Russell Terrier
[ğŸ—„ï¸ Database] Filtering by location: Denver, CO
[ğŸ” Petfinder] Database returned only 0 dogs, searching Petfinder for additional...
[ğŸ” /api/petfinder/search] Starting search request
[ğŸ“‹ Raw Input] { location: 'Denver, CO', breed: 'Jack Russell Terrier' }
[ğŸ’¾ Database] Trying database search first...
[ğŸ¾ /api/petfinder/search hit]
[ğŸ« Token Manager] Fetching new Petfinder access token...
[âœ… Token Manager] Got new Petfinder token, expires in 3600 seconds
[ğŸ§  Breed Normalization] "jack russell terrier" â†’ "Jack Russell Terrier"
[âœ… Fallback Breed Match] "Jack Russell Terrier" â†’ "Jack Russell Terrier"
[âœ… Breed Match Success] "Jack Russell Terrier" â†’ "Jack Russell Terrier"
[ğŸ“¡ Fetching]: https://api.petfinder.com/v2/animals?type=dog&status=adoptable&limit=100&location=denver%2C+co&distance=100&breed=Jack+Russell+Terrier
[âŒ API Error] 429 {"type":"https://httpstatus.es/429", "status":429, "title":"Rate Limit Exceeded", "detail":"Limit Exceeded"}
[âŒ Rate Limit Hit] Petfinder API rate limit exceeded
 POST /api/petfinder/search 429 in 1021ms
[âŒ Petfinder Error] API call failed, continuing with database results
 POST /api/chat 200 in 2737ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ“ Normalized Location] Boston, MA
[ğŸ¾ Barkr Memory] {
  location: 'Boston, MA',
  breed: 'jack russells',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Boston, MA', breed: 'jack russells' }
[ğŸ§  Breed Normalization] Input: jack russells â†’ Cleaned: Jack Russell
[âœ… Fallback Breed Match] "Jack Russell" â†’ "Jack Russell Terrier"
[âœ… Breed Match Success] Matched to: Jack Russell Terrier
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Jack Russell Terrier
[ğŸ—„ï¸ Database] Filtering by location: Boston, MA
[ğŸ” Petfinder] Database returned only 0 dogs, searching Petfinder for additional...
[ğŸ” /api/petfinder/search] Starting search request
[ğŸ“‹ Raw Input] { location: 'Boston, MA', breed: 'Jack Russell Terrier' }
[ğŸ’¾ Database] Trying database search first...
[ğŸ¾ /api/petfinder/search hit]
[ğŸ« Token Manager] Using cached token
[ğŸ§  Breed Normalization] "jack russell terrier" â†’ "Jack Russell Terrier"
[âœ… Fallback Breed Match] "Jack Russell Terrier" â†’ "Jack Russell Terrier"
[âœ… Breed Match Success] "Jack Russell Terrier" â†’ "Jack Russell Terrier"
[ğŸ“¡ Fetching]: https://api.petfinder.com/v2/animals?type=dog&status=adoptable&limit=100&location=boston%2C+ma&distance=100&breed=Jack+Russell+Terrier
[âŒ API Error] 429 {"type":"https://httpstatus.es/429", "status":429, "title":"Rate Limit Exceeded", "detail":"Limit Exceeded"}
[âŒ Rate Limit Hit] Petfinder API rate limit exceeded
 POST /api/petfinder/search 429 in 507ms
[âŒ Petfinder Error] API call failed, continuing with database results
 POST /api/chat 200 in 2009ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ“ Normalized Location] Boston, MA
[ğŸ¾ Barkr Memory] {
  location: 'Boston, MA',
  breed: 'jack russell',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Boston, MA', breed: 'jack russell' }
[ğŸ§  Breed Normalization] Input: jack russell â†’ Cleaned: Jack Russell
[âœ… Fallback Breed Match] "Jack Russell" â†’ "Jack Russell Terrier"
[âœ… Breed Match Success] Matched to: Jack Russell Terrier
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Jack Russell Terrier
[ğŸ—„ï¸ Database] Filtering by location: Boston, MA
[ğŸ” Petfinder] Database returned only 0 dogs, searching Petfinder for additional...
[ğŸ” /api/petfinder/search] Starting search request
[ğŸ“‹ Raw Input] { location: 'Boston, MA', breed: 'Jack Russell Terrier' }
[ğŸ’¾ Database] Trying database search first...
[ğŸ¾ /api/petfinder/search hit]
[ğŸ« Token Manager] Using cached token
[ğŸ§  Breed Normalization] "jack russell terrier" â†’ "Jack Russell Terrier"
[âœ… Fallback Breed Match] "Jack Russell Terrier" â†’ "Jack Russell Terrier"
[âœ… Breed Match Success] "Jack Russell Terrier" â†’ "Jack Russell Terrier"
[ğŸ“¡ Fetching]: https://api.petfinder.com/v2/animals?type=dog&status=adoptable&limit=100&location=boston%2C+ma&distance=100&breed=Jack+Russell+Terrier
[âŒ API Error] 429 {"type":"https://httpstatus.es/429", "status":429, "title":"Rate Limit Exceeded", "detail":"Limit Exceeded"}
[âŒ Rate Limit Hit] Petfinder API rate limit exceeded
 POST /api/petfinder/search 429 in 516ms
[âŒ Petfinder Error] API call failed, continuing with database results
 POST /api/chat 200 in 2223ms
 GET / 200 in 30ms
 HEAD / 200 in 23ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[âš ï¸ Barkr] Invalid location in memory, wiping: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
 POST /api/chat 200 in 1502ms
[ğŸ§  AI Intent] AI detected general question, switching modes
[ğŸ§  Barkr] Final context: general
[ğŸ§  Final Decision] aiIntent: general, context: general, isAdoptionMode: false
 POST /api/chat 200 in 4976ms