ğŸ• Starting dog data sync...
ğŸ”‘ Fetching new Petfinder access token...
âœ… Got new Petfinder token
ğŸ” Fetching dogs from: 59008
ğŸ“ Found 100 dogs in 59008
ğŸ” Fetching dogs from: 80432
ğŸ“ Found 100 dogs in 80432
ğŸ” Fetching dogs from: 32030
ğŸ“ Found 100 dogs in 32030
ğŸ” Fetching dogs from: 15009
ğŸ“ Found 100 dogs in 15009
ğŸ” Fetching dogs from: 99577
ğŸ“ Found 100 dogs in 99577
ğŸ” Fetching dogs from: 60002
ğŸ“ Found 100 dogs in 60002
ğŸ” Fetching dogs from: 63013
ğŸ“ Found 100 dogs in 63013
ğŸ” Fetching dogs from: 89002
âš ï¸ Failed to fetch from 89002: API error for 89002: 502
ğŸ” Fetching dogs from: 70009
ğŸ“ Found 100 dogs in 70009
ğŸ” Fetching dogs from: 48009
ğŸ“ Found 100 dogs in 48009
ğŸ” Fetching dogs from: 27007
ğŸ“ Found 100 dogs in 27007
ğŸ” Fetching dogs from: 38601
ğŸ“ Found 100 dogs in 38601
ğŸ” Fetching dogs from: 93203
ğŸ“ Found 100 dogs in 93203
ğŸ” Fetching dogs from: 46012
ğŸ“ Found 100 dogs in 46012
ğŸ” Fetching dogs from: 96709
ğŸ“ Found 100 dogs in 96709
ğŸ” Fetching dogs from: 29016
ğŸ“ Found 100 dogs in 29016
ğŸ” Fetching dogs from: 04001
ğŸ“ Found 100 dogs in 04001
ğŸ” Fetching dogs from: 05032
ğŸ“ Found 100 dogs in 05032
ğŸ” Fetching dogs from: 15006
ğŸ“ Found 100 dogs in 15006
ğŸ” Fetching dogs from: 40010
ğŸ“ Found 100 dogs in 40010
ğŸ” Fetching dogs from: 35016
ğŸ“ Found 100 dogs in 35016
ğŸ” Fetching dogs from: 71601
ğŸ“ Found 100 dogs in 71601
ğŸ” Fetching dogs from: 80425
ğŸ“ Found 100 dogs in 80425
ğŸ” Fetching dogs from: 06013
ğŸ“ Found 100 dogs in 06013
ğŸ” Fetching dogs from: 15007
ğŸ“ Found 100 dogs in 15007
ğŸ” Fetching dogs from: 66015
ğŸ“ Found 100 dogs in 66015
ğŸ” Fetching dogs from: 19702
ğŸ“ Found 100 dogs in 19702
ğŸ” Fetching dogs from: 24701
ğŸ“ Found 100 dogs in 24701
ğŸ” Fetching dogs from: 01012
ğŸ“ Found 100 dogs in 01012
ğŸ” Fetching dogs from: 55001
ğŸ“ Found 100 dogs in 55001
ğŸ” Fetching dogs from: 19710
ğŸ“ Found 100 dogs in 19710
ğŸ” Fetching dogs from: 24714
ğŸ“ Found 100 dogs in 24714
ğŸ” Fetching dogs from: 24715
ğŸ“ Found 100 dogs in 24715
ğŸ” Fetching dogs from: 59007
ğŸ“ Found 100 dogs in 59007
ğŸ” Fetching dogs from: 05030
ğŸ“ Found 100 dogs in 05030
ğŸ” Fetching dogs from: 93207
ğŸ“ Found 100 dogs in 93207
ğŸ” Fetching dogs from: 97009
ğŸ“ Found 100 dogs in 97009
ğŸ” Fetching dogs from: 15005
ğŸ“ Found 100 dogs in 15005
ğŸ” Fetching dogs from: 63005
ğŸ“ Found 100 dogs in 63005
ğŸ” Fetching dogs from: 63011
ğŸ“ Found 100 dogs in 63011
ğŸ” Fetching dogs from: 48001
ğŸ“ Found 100 dogs in 48001
ğŸ” Fetching dogs from: 84006
ğŸ“ Found 100 dogs in 84006
ğŸ” Fetching dogs from: 22032
ğŸ“ Found 100 dogs in 22032
ğŸ” Fetching dogs from: 53008
ğŸ“ Found 100 dogs in 53008
ğŸ” Fetching dogs from: 58011
ğŸ“ Found 100 dogs in 58011
ğŸ” Fetching dogs from: 66013
ğŸ“ Found 100 dogs in 66013
ğŸ” Fetching dogs from: 27006
ğŸ“ Found 100 dogs in 27006
ğŸ” Fetching dogs from: 59001
ğŸ“ Found 100 dogs in 59001
ğŸ” Fetching dogs from: 97001
ğŸ“ Found 100 dogs in 97001
ğŸ” Fetching dogs from: 15004
ğŸ“ Found 100 dogs in 15004
ğŸ” Fetching dogs from: 06018
ğŸ“ Found 100 dogs in 06018
ğŸ” Fetching dogs from: 10501
ğŸ“ Found 100 dogs in 10501
ğŸ” Fetching dogs from: 83205
ğŸ“ Found 100 dogs in 83205
ğŸ” Fetching dogs from: 80427
ğŸ“ Found 100 dogs in 80427
ğŸ” Fetching dogs from: 93204
ğŸ“ Found 100 dogs in 93204
ğŸ” Fetching dogs from: 06022
ğŸ“ Found 100 dogs in 06022
ğŸ” Fetching dogs from: 37010
ğŸ“ Found 100 dogs in 37010
ğŸ” Fetching dogs from: 29015
ğŸ“ Found 100 dogs in 29015
ğŸ” Fetching dogs from: 50003
ğŸ“ Found 100 dogs in 50003
ğŸ” Fetching dogs from: 24725
âš ï¸ Failed to fetch from 24725: API error for 24725: 400
ğŸ” Fetching dogs from: 53001
ğŸ“ Found 100 dogs in 53001
ğŸ” Fetching dogs from: 37011
ğŸ“ Found 100 dogs in 37011
ğŸ” Fetching dogs from: 15012
ğŸ“ Found 100 dogs in 15012
ğŸ” Fetching dogs from: 24715
ğŸ“ Found 100 dogs in 24715
ğŸ” Fetching dogs from: 19707
ğŸ“ Found 100 dogs in 19707
ğŸ” Fetching dogs from: 84008
ğŸ“ Found 100 dogs in 84008
ğŸ” Fetching dogs from: 40007
ğŸ“ Found 100 dogs in 40007
ğŸ” Fetching dogs from: 03037
ğŸ“ Found 100 dogs in 03037
ğŸ” Fetching dogs from: 22003
ğŸ“ Found 100 dogs in 22003
ğŸ” Fetching dogs from: 85607
ğŸ“ Found 100 dogs in 85607
ğŸ” Fetching dogs from: 15004
ğŸ“ Found 100 dogs in 15004
ğŸ” Fetching dogs from: 58002
ğŸ“ Found 100 dogs in 58002
ğŸ” Fetching dogs from: 15010
ğŸ“ Found 100 dogs in 15010
ğŸ” Fetching dogs from: 38611
ğŸ“ Found 100 dogs in 38611
ğŸ” Fetching dogs from: 04001
ğŸ“ Found 100 dogs in 04001
ğŸ” Fetching dogs from: Phoenix, AZ
ğŸ“ Found 100 dogs in Phoenix, AZ
ğŸ” Fetching dogs from: Philadelphia, PA
ğŸ“ Found 100 dogs in Philadelphia, PA
ğŸ” Fetching dogs from: San Antonio, TX
ğŸ“ Found 100 dogs in San Antonio, TX
ğŸ” Fetching dogs from: Chicago, IL
ğŸ“ Found 100 dogs in Chicago, IL
ğŸ¯ Found 3969 unique dogs total
ğŸ“ Syncing 3969 dogs to database...
ğŸ”— Testing Supabase connection...
âœ… Connected to Supabase! Current dogs in DB: 0
âš ï¸ Skipping sync record creation - testing direct dog insertion
ğŸ§ª Testing database insertion with first dog...
ğŸ§ª Test record structure: {
  "petfinder_id": "77461011",
  "name": "Dunkin",
  "breed_primary": "German Shepherd Dog",
  "breed_secondary": "Mixed Breed",
  "age": "Young",
  "gender": "Male",
  "size": "Medium",
  "location": "Cody, WY",
  "organization_id": "WY57",
  "description": "I&amp;#39;m a good boy - I love all people and try to be super well behaved! I am kind and...",
  "photos": [
    "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=300",
    "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/2/?bust=1753421258&width=300"
  ],
  "status": "available",
  "visibility_score": 47,
  "last_updated": "2025-07-25T14:03:52.297Z",
  "source": "petfinder",
  "raw_data": {
    "id": 77461011,
    "organization_id": "WY57",
    "url": "https://www.petfinder.com/dog/dunkin-77461011/wy/cody/3-dog-rescue-wy57/?referrer_id=309266f4-4871-4de8-9be8-fa0bd07816e8&utm_source=api&utm_medium=partnership&utm_content=309266f4-4871-4de8-9be8-fa0bd07816e8",
    "type": "Dog",
    "species": "Dog",
    "breeds": {
      "primary": "German Shepherd Dog",
      "secondary": "Mixed Breed",
      "mixed": true,
      "unknown": false
    },
    "colors": {
      "primary": "Bicolor",
      "secondary": null,
      "tertiary": null
    },
    "age": "Young",
    "gender": "Male",
    "size": "Medium",
    "coat": null,
    "attributes": {
      "spayed_neutered": false,
      "house_trained": false,
      "declawed": null,
      "special_needs": false,
      "shots_current": true
    },
    "environment": {
      "children": true,
      "dogs": true,
      "cats": null
    },
    "tags": [
      "Affectionate"
    ],
    "name": "Dunkin",
    "description": "I&amp;#39;m a good boy - I love all people and try to be super well behaved! I am kind and...",
    "organization_animal_id": "21098",
    "photos": [
      {
        "small": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=100",
        "medium": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=300",
        "large": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=600",
        "full": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777"
      },
      {
        "small": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/2/?bust=1753421258&width=100",
        "medium": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/2/?bust=1753421258&width=300",
        "large": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/2/?bust=1753421258&width=600",
        "full": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/2/?bust=1753421258"
      }
    ],
    "primary_photo_cropped": {
      "small": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=300",
      "medium": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=450",
      "large": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777&width=600",
      "full": "https://dl5zpyw5k3jeb.cloudfront.net/photos/pets/77461011/1/?bust=1753448777"
    },
    "videos": [],
    "status": "adoptable",
    "status_changed_at": "2025-07-25T05:26:08+0000",
    "published_at": "2025-07-25T05:26:06+0000",
    "distance": 35.3331,
    "contact": {
      "email": "info@3dogrescue.com",
      "phone": "(307) 250-3737",
      "address": {
        "address1": "134 Cooper Lane E.",
        "address2": null,
        "city": "Cody",
        "state": "WY",
        "postcode": "82414",
        "country": "US"
      }
    },
    "_links": {
      "self": {
        "href": "/v2/animals/77461011"
      },
      "type": {
        "href": "/v2/types/dog"
      },
      "organization": {
        "href": "/v2/organizations/wy57"
      }
    }
  }
}
âŒ DATABASE TEST FAILED: {
  code: 'PGRST204',
  details: null,
  hint: null,
  message: "Could not find the 'breed_primary' column of 'dogs' in the schema cache"
}
âŒ Cannot proceed with sync - database structure issue
ğŸ§¹ Marking old dogs as removed...
âœ… Marked old dogs as removed
âœ… Dog sync completed successfully!