~/workspace$ cd animal-rescue-donations
~/workspace/animal-rescue-donations$ npm run dev

> animal-rescue-donations@0.1.0 dev
> next dev

 âš  Port 3000 is in use, trying 3001 instead.
  â–² Next.js 14.2.28
  - Local:        http://localhost:3001
  - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 2.7s
 â—‹ Compiling / ...
 âœ“ Compiled / in 12.5s (8586 modules)
 GET / 200 in 13302ms
 âœ“ Compiled in 1261ms (4186 modules)
 HEAD / 200 in 28ms
 GET / 200 in 34ms
 HEAD / 200 in 21ms
 GET / 200 in 34ms
 HEAD / 200 in 22ms
 â—‹ Compiling /api/chat ...
 âœ“ Compiled /api/chat in 1678ms (4637 modules)
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ§¼ Final Cleaned Location] Houston, TX
[ğŸ“ Normalized Location] Houston, TX
[ğŸ¾ Barkr Memory] {
  location: 'Houston, TX',
  breed: 'labs',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Houston, TX', breed: 'labs' }
[ğŸ§  Breed Normalization] Input: labs â†’ Cleaned: Lab
[âœ… Fallback Breed Match] "Lab" â†’ "Labrador Retriever"
[âœ… Breed Match Success] Matched to: Labrador Retriever
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Labrador Retriever
[ğŸ—„ï¸ Database] Filtering by location: Houston, TX
[ğŸ—„ï¸ Database] Filtering by state: TX
[ğŸ” Petfinder] Database returned only 0 dogs, searching Petfinder for additional...
 â—‹ Compiling /api/petfinder/search ...
 âœ“ Compiled /api/petfinder/search in 1596ms (4642 modules)
[ğŸ” Enhanced Search] Starting Database â†’ Petfinder search waterfall
[ğŸ“‹ Raw Input] {
  location: 'Houston, TX',
  breed: 'Labrador Retriever',
  age: null,
  size: null,
  gender: null,
  limit: 25,
  isChat: true
}
[ğŸ¯ Context] Chat search - limit: 25
[ğŸ§¼ Normalized Params] {
  location: 'Houston, TX',
  breed: 'Labrador Retriever',
  limit: 25,
  radius: 100
}
[ğŸ’¾ Database] Searching database first...
Searching for dogs with location: Houston, TX, breed: Labrador Retriever, limit: 50
Error searching dogs: {
  code: 'PGRST100',
  details: 'unexpected "%" expecting letter, digit, "-", "->>", "->" or delimiter (.)',
  hint: null,
  message: '"failed to parse logic tree ((city.ilike.%houston, tx%,state.ilike.%houston, tx%,zip.ilike.%houston, tx%))" (line 1, column 27)'
}
[ğŸ¾ Petfinder] Falling back to Petfinder API...
[ğŸ“Š Current Results] 0 dogs found so far, need 25 more
[ğŸ”„ Rate Limit] Reset rate limit window
[ğŸ« Token Manager] Fetching new Petfinder access token...
[âœ… Token Manager] Got new Petfinder token, expires in 3600 seconds
[âœ… Fallback Breed Match] "Labrador Retriever" â†’ "Labrador Retriever"
[ğŸ“¡ Petfinder] Fetching: https://api.petfinder.com/v2/animals?type=dog&status=adoptable&limit=25&location=Houston%2C+TX&distance=100&breed=Labrador+Retriever
[âœ… Petfinder Hit] Found 25 dogs from Petfinder
[ğŸ”„ Deduplication] 0 duplicates removed from Petfinder
[âœ… Search Complete] Found 25 total dogs from sources: petfinder
[ğŸ“Š Source Breakdown] petfinder: 25
 POST /api/petfinder/search 200 in 4199ms
[âœ… Chat Search Success] Found 25 dogs for labs in Houston, TX from sources: petfinder
[âœ… Petfinder Integration] Found 25 Petfinder dogs, 0 were duplicates of database dogs
[âœ… Search Complete] Total unique dogs: 25 Showing: 10
[âœ… Search Complete] Total unique dogs: 25 Showing: 10
[ğŸ“Š Scores] Sample scores: [ 'Sylphiette: 111.3', 'Fefe: 110.6', 'Milo: 100.2' ]
 POST /api/chat 200 in 8754ms
 â—‹ Compiling /adopt/[dogId] ...
 âœ“ Compiled /adopt/[dogId] in 1578ms (8820 modules)
 GET /adopt/77758190 200 in 2474ms
 HEAD /adopt/77758190 200 in 35ms
 â—‹ Compiling /api/dog/[dogId] ...
 âœ“ Compiled /api/dog/[dogId] in 1393ms (4649 modules)
[ğŸ” Dog Lookup] Starting search for dogId: 77758190
[ğŸ’¾ Database] Searching database first...
Searching for dog with petfinder_id: 77758190
No dog found with petfinder_id: 77758190
[ğŸ’¾ Database] Not found by petfinder_id, trying rescuegroups_id and alternative formats...
[ğŸ’¾ Database] Trying petfinder_id as number...
[ğŸ’¾ Database] Trying petfinder_id as string...
[ğŸ¦® RescueGroups] Searching RescueGroups...
[ğŸ¦® RescueGroups] Getting details for animal: 77758190
[ğŸ¦® RescueGroups] Making GET request to: https://api.rescuegroups.org/v5/public/animals/77758190?fields%5Banimals%5D=id%2Cname%2Cstatus%2Cspecies%2CageGroup%2Csex%2CsizeGroup%2CbreedPrimary%2CbreedSecondary%2CbreedMixed%2CdescriptionText%2CspecialNeeds%2ChouseTrained%2CgoodWithChildren%2CgoodWithCats%2CgoodWithDogs%2Cpictures%2CthumbnailUrl%2Curl%2CanimalLocationCity%2CanimalLocationState%2CanimalLocationPostalcode&include=orgs%2Clocations%2Cbreeds%2Cpictures
[ğŸ¦® RescueGroups] Response status: 200
[ğŸ¦® RescueGroups] Response result structure: {
  dataCount: 0,
  includedCount: 0,
  meta: {
    count: 0,
    countReturned: 0,
    pageReturned: 1,
    limit: 25,
    pages: 0,
    transactionId: 'DVxkDejAYHyD'
  }
}
[âœ… RescueGroups] Got details for: Unknown
[ğŸ¾ Petfinder] Falling back to Petfinder API...
[ğŸ« Token Manager] Fetching new Petfinder access token...
[âœ… Token Manager] Got new Petfinder token, expires in 3600 seconds
[âš ï¸ Petfinder API Error] 401 {"type":"https://httpstatus.es/401", "status":401, "title":"Unauthorized", "detail":"Access token invalid or expired"}
[âŒ Not Found] Dog with ID 77758190 not found in any source
 GET /api/dog/77758190 404 in 3730ms
[ğŸ” Dog Lookup] Starting search for dogId: 77758190
[ğŸ’¾ Database] Searching database first...
Searching for dog with petfinder_id: 77758190
No dog found with petfinder_id: 77758190
[ğŸ’¾ Database] Not found by petfinder_id, trying rescuegroups_id and alternative formats...
[ğŸ’¾ Database] Trying petfinder_id as number...
[ğŸ’¾ Database] Trying petfinder_id as string...
[ğŸ¦® RescueGroups] Searching RescueGroups...
[ğŸ¦® RescueGroups] Getting details for animal: 77758190
[ğŸ¦® RescueGroups] Making GET request to: https://api.rescuegroups.org/v5/public/animals/77758190?fields%5Banimals%5D=id%2Cname%2Cstatus%2Cspecies%2CageGroup%2Csex%2CsizeGroup%2CbreedPrimary%2CbreedSecondary%2CbreedMixed%2CdescriptionText%2CspecialNeeds%2ChouseTrained%2CgoodWithChildren%2CgoodWithCats%2CgoodWithDogs%2Cpictures%2CthumbnailUrl%2Curl%2CanimalLocationCity%2CanimalLocationState%2CanimalLocationPostalcode&include=orgs%2Clocations%2Cbreeds%2Cpictures
[ğŸ¦® RescueGroups] Response status: 200
[ğŸ¦® RescueGroups] Response result structure: {
  dataCount: 0,
  includedCount: 0,
  meta: {
    count: 0,
    countReturned: 0,
    pageReturned: 1,
    limit: 25,
    pages: 0,
    transactionId: 'DVxkDejAYHyD'
  }
}
[âœ… RescueGroups] Got details for: Unknown
[ğŸ¾ Petfinder] Falling back to Petfinder API...
[ğŸ« Token Manager] Using cached token
[âš ï¸ Petfinder API Error] 401 {"type":"https://httpstatus.es/401", "status":401, "title":"Unauthorized", "detail":"Access token invalid or expired"}
[âŒ Not Found] Dog with ID 77758190 not found in any source
 GET /api/dog/77758190 404 in 1147ms
 GET /adopt/77755523 200 in 318ms
 HEAD /adopt/77755523 200 in 37ms
[ğŸ” Dog Lookup] Starting search for dogId: 77755523
[ğŸ’¾ Database] Searching database first...
Searching for dog with petfinder_id: 77755523
No dog found with petfinder_id: 77755523
[ğŸ’¾ Database] Not found by petfinder_id, trying rescuegroups_id and alternative formats...
[ğŸ’¾ Database] Trying petfinder_id as number...
[ğŸ’¾ Database] Trying petfinder_id as string...
[ğŸ¦® RescueGroups] Searching RescueGroups...
[ğŸ¦® RescueGroups] Getting details for animal: 77755523
[ğŸ¦® RescueGroups] Making GET request to: https://api.rescuegroups.org/v5/public/animals/77755523?fields%5Banimals%5D=id%2Cname%2Cstatus%2Cspecies%2CageGroup%2Csex%2CsizeGroup%2CbreedPrimary%2CbreedSecondary%2CbreedMixed%2CdescriptionText%2CspecialNeeds%2ChouseTrained%2CgoodWithChildren%2CgoodWithCats%2CgoodWithDogs%2Cpictures%2CthumbnailUrl%2Curl%2CanimalLocationCity%2CanimalLocationState%2CanimalLocationPostalcode&include=orgs%2Clocations%2Cbreeds%2Cpictures
[ğŸ¦® RescueGroups] Response status: 200
[ğŸ¦® RescueGroups] Response result structure: {
  dataCount: 0,
  includedCount: 0,
  meta: {
    count: 0,
    countReturned: 0,
    pageReturned: 1,
    limit: 25,
    pages: 0,
    transactionId: 'piNYqVvnWXjS'
  }
}
[âœ… RescueGroups] Got details for: Unknown
[ğŸ¾ Petfinder] Falling back to Petfinder API...
[ğŸ« Token Manager] Using cached token
[âš ï¸ Petfinder API Error] 401 {"type":"https://httpstatus.es/401", "status":401, "title":"Unauthorized", "detail":"Access token invalid or expired"}
[âŒ Not Found] Dog with ID 77755523 not found in any source
 GET /api/dog/77755523 404 in 1891ms
[ğŸ” Dog Lookup] Starting search for dogId: 77755523
[ğŸ’¾ Database] Searching database first...
Searching for dog with petfinder_id: 77755523
No dog found with petfinder_id: 77755523
[ğŸ’¾ Database] Not found by petfinder_id, trying rescuegroups_id and alternative formats...
[ğŸ’¾ Database] Trying petfinder_id as number...
[ğŸ’¾ Database] Trying petfinder_id as string...
[ğŸ¦® RescueGroups] Searching RescueGroups...
[ğŸ¦® RescueGroups] Getting details for animal: 77755523
[ğŸ¦® RescueGroups] Making GET request to: https://api.rescuegroups.org/v5/public/animals/77755523?fields%5Banimals%5D=id%2Cname%2Cstatus%2Cspecies%2CageGroup%2Csex%2CsizeGroup%2CbreedPrimary%2CbreedSecondary%2CbreedMixed%2CdescriptionText%2CspecialNeeds%2ChouseTrained%2CgoodWithChildren%2CgoodWithCats%2CgoodWithDogs%2Cpictures%2CthumbnailUrl%2Curl%2CanimalLocationCity%2CanimalLocationState%2CanimalLocationPostalcode&include=orgs%2Clocations%2Cbreeds%2Cpictures
[ğŸ¦® RescueGroups] Response status: 200
[ğŸ¦® RescueGroups] Response result structure: {
  dataCount: 0,
  includedCount: 0,
  meta: {
    count: 0,
    countReturned: 0,
    pageReturned: 1,
    limit: 25,
    pages: 0,
    transactionId: 'piNYqVvnWXjS'
  }
}
[âœ… RescueGroups] Got details for: Unknown
[ğŸ¾ Petfinder] Falling back to Petfinder API...
[ğŸ« Token Manager] Using cached token
[âš ï¸ Petfinder API Error] 401 {"type":"https://httpstatus.es/401", "status":401, "title":"Unauthorized", "detail":"Access token invalid or expired"}
[âŒ Not Found] Dog with ID 77755523 not found in any source
 GET /api/dog/77755523 404 in 1306ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ§  GPT Parser] No clear breed or location found in: more dogs please
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ¾ More Request] Processing more dogs request
[ğŸ¾ Memory Check] Cached dogs count: 25
[ğŸ¾ Memory Check] Seen dogs count: 10
[ğŸ¾ Memory Check] Location: Houston, TX
[ğŸ¾ Memory Check] Breed: labs
[ğŸ¾ Using Cache] Found cached dogs, checking for unseen ones...
[ğŸ¾ Filter Check] Unseen dogs count: 15
[ğŸ¾ Showing] Displaying 10 more dogs from cache
 POST /api/chat 200 in 2518ms
 â—‹ Compiling /adopt ...
 âœ“ Compiled /adopt in 2.8s (8949 modules)
 GET /adopt 200 in 3172ms
 HEAD /adopt 200 in 17ms
 â—‹ Compiling /api/invisible-dogs ...
 âœ“ Compiled /api/invisible-dogs in 813ms (4585 modules)
[ğŸ” Invisible Dogs API] Fetching most invisible dogs...
[âœ… Invisible Dogs] Found 100 dogs from database
 GET /api/invisible-dogs 200 in 891ms
[ğŸ” Invisible Dogs API] Fetching most invisible dogs...
[âœ… Invisible Dogs] Found 100 dogs from database
 GET /api/invisible-dogs 200 in 12ms
 GET / 200 in 257ms
 HEAD / 200 in 22ms
 â—‹ Compiling /api/chat ...
 âœ“ Compiled /api/chat in 998ms (4708 modules)
[ğŸ§  Mission Intent] Invisible dogs request detected, forcing adoption mode
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ§  GPT Parser] No clear breed or location found in: show me the most invisible dogs
[âš ï¸ Barkr] Invalid breed in memory, wiping: undefined
[âš ï¸ Barkr] Invalid location in memory, wiping: undefined
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ” Invisible Dogs] Fetching dogs with highest visibility scores...
[âœ… Invisible Dogs] Found 10 dogs from database
 POST /api/chat 200 in 2493ms
 âœ“ Compiled in 4.3s (8721 modules)
^C

~/workspace/animal-rescue-donations$ npm run dev

> animal-rescue-donations@0.1.0 dev
> next dev

 âš  Port 3000 is in use, trying 3001 instead.
  â–² Next.js 14.2.28
  - Local:        http://localhost:3001
  - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 2.2s
 â—‹ Compiling / ...
 âœ“ Compiled / in 12.2s (8586 modules)
 GET / 200 in 12963ms
 âœ“ Compiled in 1237ms (4186 modules)
 HEAD / 200 in 36ms
 GET / 200 in 34ms
 HEAD / 200 in 18ms
^C

~/workspace/animal-rescue-donations$ npm run dev

> animal-rescue-donations@0.1.0 dev
> next dev

 âš  Port 3000 is in use, trying 3001 instead.
  â–² Next.js 14.2.28
  - Local:        http://localhost:3001
  - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 2.2s
 â—‹ Compiling / ...
 âœ“ Compiled / in 10.6s (8586 modules)
 GET / 200 in 11424ms
 âœ“ Compiled in 1282ms (4186 modules)
 HEAD / 200 in 25ms
 â—‹ Compiling /api/chat ...
 âœ“ Compiled /api/chat in 2.9s (4637 modules)
[ğŸ§  Mission Intent] Invisible dogs request detected, forcing adoption mode
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ§  GPT Parser] No clear breed or location found in: show me the most invisible dogs
[âš ï¸ Barkr] Invalid breed in memory, wiping: undefined
[âš ï¸ Barkr] Invalid location in memory, wiping: undefined
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ” Invisible Dogs] Fetching dogs with highest visibility scores...
[âœ… Invisible Dogs] Found 10 dogs from database
[âŒ Invisible Dogs Error] ReferenceError: teVisibilityScore is not defined
    at POST (webpack-internal:///(rsc)/./app/api/chat/route.ts:870:29)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:178:21)
    at async handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:355:24)
    at async requestHandlerImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:379:13)
    at async Server.requestListener (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/start-server.js:141:13)
 POST /api/chat 200 in 7161ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ§¼ Final Cleaned Location] Houston, TX
[ğŸ“ Normalized Location] Houston, TX
[ğŸ¾ Barkr Memory] {
  location: 'Houston, TX',
  breed: 'labs',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Houston, TX', breed: 'labs' }
[ğŸ§  Breed Normalization] Input: labs â†’ Cleaned: Lab
[âœ… Fallback Breed Match] "Lab" â†’ "Labrador Retriever"
[âœ… Breed Match Success] Matched to: Labrador Retriever
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Labrador Retriever
[ğŸ—„ï¸ Database] Filtering by location: Houston, TX
[ğŸ—„ï¸ Database] Filtering by state: TX
[ğŸ” Petfinder] Database returned only 0 dogs, searching Petfinder for additional...
 â—‹ Compiling /api/petfinder/search ...
 âœ“ Compiled /api/petfinder/search in 1201ms (4642 modules)
[ğŸ” Enhanced Search] Starting Database â†’ Petfinder search waterfall
[ğŸ“‹ Raw Input] {
  location: 'Houston, TX',
  breed: 'Labrador Retriever',
  age: null,
  size: null,
  gender: null,
  limit: 25,
  isChat: true
}
[ğŸ¯ Context] Chat search - limit: 25
[ğŸ§¼ Normalized Params] {
  location: 'Houston, TX',
  breed: 'Labrador Retriever',
  limit: 25,
  radius: 100
}
[ğŸ’¾ Database] Searching database first...
Searching for dogs with location: Houston, TX, breed: Labrador Retriever, limit: 50
Error searching dogs: {
  code: 'PGRST100',
  details: 'unexpected "%" expecting letter, digit, "-", "->>", "->" or delimiter (.)',
  hint: null,
  message: '"failed to parse logic tree ((city.ilike.%houston, tx%,state.ilike.%houston, tx%,zip.ilike.%houston, tx%))" (line 1, column 27)'
}
[ğŸ¾ Petfinder] Falling back to Petfinder API...
[ğŸ“Š Current Results] 0 dogs found so far, need 25 more
[ğŸ”„ Rate Limit] Reset rate limit window
[ğŸ« Token Manager] Fetching new Petfinder access token...
[âœ… Token Manager] Got new Petfinder token, expires in 3600 seconds
[âœ… Fallback Breed Match] "Labrador Retriever" â†’ "Labrador Retriever"
[ğŸ“¡ Petfinder] Fetching: https://api.petfinder.com/v2/animals?type=dog&status=adoptable&limit=25&location=Houston%2C+TX&distance=100&breed=Labrador+Retriever
[âœ… Petfinder Hit] Found 25 dogs from Petfinder
[ğŸ”„ Deduplication] 0 duplicates removed from Petfinder
[âœ… Search Complete] Found 25 total dogs from sources: petfinder
[ğŸ“Š Source Breakdown] petfinder: 25
 POST /api/petfinder/search 200 in 3643ms
[âœ… Chat Search Success] Found 25 dogs for labs in Houston, TX from sources: petfinder
[âœ… Petfinder Integration] Found 25 Petfinder dogs, 0 were duplicates of database dogs
[âœ… Search Complete] Total unique dogs: 25 Showing: 10
[âœ… Search Complete] Total unique dogs: 25 Showing: 10
[ğŸ“Š Scores] Sample scores: [ 'Sylphiette: 111.3', 'Fefe: 110.6', 'Milo: 100.2' ]
 POST /api/chat 200 in 5446ms
 â—‹ Compiling /adopt/[dogId] ...
 âœ“ Compiled /adopt/[dogId] in 1606ms (8820 modules)
 GET /adopt/77757919 200 in 2314ms
 HEAD /adopt/77757919 200 in 35ms
 â—‹ Compiling /api/dog/[dogId] ...
 âœ“ Compiled /api/dog/[dogId] in 862ms (4649 modules)
[ğŸ” Dog Lookup] Starting search for dogId: 77757919
[ğŸ’¾ Database] Searching database first...
Searching for dog with petfinder_id: 77757919
No dog found with petfinder_id: 77757919
[ğŸ’¾ Database] Not found by direct or legacy petfinder_id, trying rescuegroups_id...
[ğŸ’¾ Database] Trying petfinder_id as number...
[ğŸ’¾ Database] Trying petfinder_id as string...
[ğŸ¦® RescueGroups] Searching RescueGroups API...
[âš ï¸ RescueGroups Warning] RescueGroups lookup failed: TypeError: rescueGroupsAPI.getDogById is not a function
    at GET (webpack-internal:///(rsc)/./app/api/dog/[dogId]/route.ts:82:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1576:40)
    at async DevServer.renderToResponseWithComponentsImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:178:21)
    at async handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:355:24)
    at async requestHandlerImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:379:13)
    at async Server.requestListener (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/start-server.js:141:13)
[ğŸ¾ Petfinder] Searching Petfinder API...
[ğŸ« Token Manager] Fetching new Petfinder access token...
[âœ… Token Manager] Got new Petfinder token, expires in 3600 seconds
[âš ï¸ Petfinder API Error] 401 {"type":"https://httpstatus.es/401", "status":401, "title":"Unauthorized", "detail":"Access token invalid or expired"}
[âŒ Not Found] Dog with ID 77757919 not found in any source
 GET /api/dog/77757919 404 in 3166ms
[ğŸ” Dog Lookup] Starting search for dogId: 77757919
[ğŸ’¾ Database] Searching database first...
Searching for dog with petfinder_id: 77757919
No dog found with petfinder_id: 77757919
[ğŸ’¾ Database] Not found by direct or legacy petfinder_id, trying rescuegroups_id...
[ğŸ’¾ Database] Trying petfinder_id as number...
[ğŸ’¾ Database] Trying petfinder_id as string...
[ğŸ¦® RescueGroups] Searching RescueGroups API...
[âš ï¸ RescueGroups Warning] RescueGroups lookup failed: TypeError: rescueGroupsAPI.getDogById is not a function
    at GET (webpack-internal:///(rsc)/./app/api/dog/[dogId]/route.ts:82:49)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1576:40)
    at async DevServer.renderToResponseWithComponentsImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:178:21)
    at async handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:355:24)
    at async requestHandlerImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:379:13)
    at async Server.requestListener (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/start-server.js:141:13)
[ğŸ¾ Petfinder] Searching Petfinder API...
[ğŸ« Token Manager] Using cached token
[âš ï¸ Petfinder API Error] 401 {"type":"https://httpstatus.es/401", "status":401, "title":"Unauthorized", "detail":"Access token invalid or expired"}
[âŒ Not Found] Dog with ID 77757919 not found in any source
 GET /api/dog/77757919 404 in 1275ms
 â—‹ Compiling /adopt ...
 âœ“ Compiled /adopt in 2.4s (8707 modules)
 GET /adopt 200 in 2856ms
 âš  Fast Refresh had to perform a full reload. Read more: https://nextjs.org/docs/messages/fast-refresh-reload
 HEAD /adopt 200 in 28ms