~/workspace$ cd animal-rescue-donations
~/workspace/animal-rescue-donations$ npm run dev

> animal-rescue-donations@0.1.0 dev
> next dev

  â–² Next.js 14.2.28
  - Local:        http://localhost:3000
  - Environments: .env

 âœ“ Starting...
 âœ“ Ready in 4.1s
 â—‹ Compiling / ...
 âœ“ Compiled / in 14.5s (8582 modules)
 GET / 200 in 15222ms
 âœ“ Compiled in 933ms (4184 modules)
 HEAD / 200 in 39ms
 â—‹ Compiling /api/chat ...
 âœ“ Compiled /api/chat in 2.8s (4635 modules)
[ğŸ§  AI Intent] AI detected general question, switching modes
[ğŸ§  Barkr] Final context: general
[ğŸ§  GPT Parser] No clear breed or location found in: Hi Barkr! I don't know if you understand this or not, but my name is Justin, and I am your developer and creator. Just wanted to let you know that I am very proud of you, and that we are getting very close to deployment, so you will be interacting with the general public soon and saving lives! 
[âš ï¸ Barkr] Invalid breed in memory, wiping: null
[âš ï¸ Barkr] Invalid location in memory, wiping: null
[ğŸ§  Final Decision] aiIntent: general, context: general, isAdoptionMode: false
 POST /api/chat 200 in 10247ms
[ğŸ§  AI Intent] AI detected general question, switching modes
[ğŸ§  Barkr] Final context: general
[ğŸ§  GPT Parser] No clear breed or location found in: Absolutely! Now I have to perform a few test queries, ok?
[âš ï¸ Barkr] Invalid breed in memory, wiping: null
[âš ï¸ Barkr] Invalid location in memory, wiping: null
[ğŸ§  Final Decision] aiIntent: general, context: general, isAdoptionMode: false
 POST /api/chat 200 in 4080ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ”· Barkr] New breed provided, wiping previous: null
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ§¼ Final Cleaned Location] Austin, TX
[ğŸ“ Normalized Location] Austin, TX
[ğŸ¾ Barkr Memory] {
  location: 'Austin, TX',
  breed: 'chihuahuas',
  hasSeenResults: false,
  seenDogIds: [],
  cachedDogs: [],
  isAdoptionMode: true,
  isInvisibleDogsSearch: false
}
[ğŸ” Petfinder Params] { location: 'Austin, TX', breed: 'chihuahuas' }
[ğŸ§  Breed Normalization] Input: chihuahuas â†’ Cleaned: Chihuahua
[âœ… Fallback Breed Match] "Chihuahua" â†’ "Chihuahua"
[âœ… Breed Match Success] Matched to: Chihuahua
[ğŸ—„ï¸ Database] Searching database first...
[ğŸ—„ï¸ Database] Filtering by breed: Chihuahua
[ğŸ—„ï¸ Database] Filtering by location: Austin, TX
[âœ… Database] Found 9 dogs in database
[ğŸ” Petfinder] Database returned only 9 dogs, searching Petfinder for additional...
 â—‹ Compiling /api/petfinder/search ...
 âœ“ Compiled /api/petfinder/search in 1350ms (4638 modules)
[ğŸ” /api/petfinder/search] Starting search request
[ğŸ“‹ Raw Input] { location: 'Austin, TX', breed: 'Chihuahua' }
[ğŸ’¾ Database] Trying database search first...
[âœ… Database Hit] Found 11 dogs in database
[âš ï¸ Database Fallback] Database search failed, using live API: TypeError: Cannot read properties of undefined (reading 'split')
    at eval (webpack-internal:///(rsc)/./app/api/petfinder/search/route.ts:60:56)
    at Array.map (<anonymous>)
    at POST (webpack-internal:///(rsc)/./app/api/petfinder/search/route.ts:40:50)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:57228
    at async eT.execute (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:46851)
    at async eT.handle (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/compiled/next-server/app-route.runtime.dev.js:6:58760)
    at async doRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1366:42)
    at async cacheEntry.responseCache.get.routeKind (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1588:28)
    at async DevServer.renderToResponseWithComponentsImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1496:28)
    at async DevServer.renderPageComponent (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1924:24)
    at async DevServer.renderToResponseImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:1962:32)
    at async DevServer.pipeImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:922:25)
    at async NextNodeServer.handleCatchallRenderRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/next-server.js:272:17)
    at async DevServer.handleRequestImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/base-server.js:818:17)
    at async /home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:339:20
    at async Span.traceAsyncFn (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/trace/trace.js:154:20)
    at async DevServer.handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/dev/next-dev-server.js:336:24)
    at async invokeRender (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:178:21)
    at async handleRequest (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:355:24)
    at async requestHandlerImpl (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/router-server.js:379:13)
    at async Server.requestListener (/home/runner/workspace/animal-rescue-donations/node_modules/next/dist/server/lib/start-server.js:141:13)
[ğŸ¾ /api/petfinder/search hit]
[ğŸ« Token Manager] Fetching new Petfinder access token...
[âœ… Token Manager] Got new Petfinder token, expires in 3600 seconds
[ğŸ§  Breed Normalization] "chihuahua" â†’ "Chihuahua"
[âœ… Fallback Breed Match] "Chihuahua" â†’ "Chihuahua"
[âœ… Breed Match Success] "Chihuahua" â†’ "Chihuahua"
[ğŸ“¡ Fetching]: https://api.petfinder.com/v2/animals?type=dog&status=adoptable&limit=100&location=austin%2C+tx&distance=100&breed=Chihuahua
[âŒ API Error] 429 {"type":"https://httpstatus.es/429", "status":429, "title":"Rate Limit Exceeded", "detail":"Limit Exceeded"}
[âŒ Rate Limit Hit] Petfinder API rate limit exceeded
 POST /api/petfinder/search 429 in 2607ms
[âŒ Petfinder Error] API call failed, continuing with database results
[âœ… Search Complete] Total unique dogs: 9 Showing: 9
[ğŸ“Š Scores] Sample scores: [ 'Thomas: 94', 'The Chad: 94', 'ChiChi: 88' ]
 POST /api/chat 200 in 4650ms
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ§  GPT Parser] No clear breed or location found in: more dogs plese
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ¾ More Request] Processing more dogs request
[ğŸ¾ Memory Check] Cached dogs count: 9
[ğŸ¾ Memory Check] Seen dogs count: 9
[ğŸ¾ Memory Check] Location: Austin, TX
[ğŸ¾ Memory Check] Breed: chihuahuas
[ğŸ¾ Using Cache] Found cached dogs, checking for unseen ones...
[ğŸ¾ Filter Check] Unseen dogs count: 0
[ğŸ¾ No More Cache] All cached dogs have been shown
 POST /api/chat 200 in 1664ms
 â—‹ Compiling /adopt/[dogId] ...
 âœ“ Compiled /adopt/[dogId] in 2.6s (8813 modules)
 GET /adopt/77490188 200 in 3507ms
 â—‹ Compiling /api/dog/[dogId] ...
 âœ“ Compiled /api/dog/[dogId] in 568ms (4643 modules)
[ğŸ• /api/dog/77490188] Fetching dog details
dogId type: string value: 77490188
ğŸ• Checking database first for dog ID: 77490188
Searching for dog with petfinder_id: 77490188
 HEAD /adopt/77490188 200 in 346ms
Found dog in database: Wrenly
Database query result: Found
âœ… Found dog in database: Wrenly
Description length: 55
 GET /api/dog/77490188 200 in 1648ms
[ğŸ• /api/dog/77490188] Fetching dog details
dogId type: string value: 77490188
ğŸ• Checking database first for dog ID: 77490188
Searching for dog with petfinder_id: 77490188
Found dog in database: Wrenly
Database query result: Found
âœ… Found dog in database: Wrenly
Description length: 55
 GET /api/dog/77490188 200 in 202ms
 GET /adopt/77489215 200 in 66ms
 HEAD /adopt/77489215 200 in 43ms
[ğŸ• /api/dog/77489215] Fetching dog details
dogId type: string value: 77489215
ğŸ• Checking database first for dog ID: 77489215
Searching for dog with petfinder_id: 77489215
Found dog in database: Thomas
Database query result: Found
âœ… Found dog in database: Thomas
Description length: 0
 GET /api/dog/77489215 200 in 357ms
[ğŸ• /api/dog/77489215] Fetching dog details
dogId type: string value: 77489215
ğŸ• Checking database first for dog ID: 77489215
Searching for dog with petfinder_id: 77489215
Found dog in database: Thomas
Database query result: Found
âœ… Found dog in database: Thomas
Description length: 0
 GET /api/dog/77489215 200 in 223ms
 GET / 200 in 238ms
 HEAD / 200 in 25ms
[ğŸ§  Mission Intent] Invisible dogs request detected, forcing adoption mode
[ğŸ§  AI Intent] AI detected adoption intent, staying in adoption mode
[ğŸ§  Barkr] Final context: adoption
[ğŸ§  GPT Parser] No clear breed or location found in: show me the most invisible dogs
[âš ï¸ Barkr] Invalid breed in memory, wiping: undefined
[âš ï¸ Barkr] Invalid location in memory, wiping: undefined
[ğŸ§  Final Decision] aiIntent: adoption, context: adoption, isAdoptionMode: true
[ğŸ” Invisible Dogs] Fetching dogs with highest visibility scores...
[âœ… Invisible Dogs] Found 100 dogs from database
 POST /api/chat 200 in 1990ms
 GET /adopt/77471284 200 in 70ms
 HEAD /adopt/77471284 200 in 53ms
[ğŸ• /api/dog/77471284] Fetching dog details
dogId type: string value: 77471284
ğŸ• Checking database first for dog ID: 77471284
Searching for dog with petfinder_id: 77471284
Found dog in database: Larry
Database query result: Found
âœ… Found dog in database: Larry
Description length: 150
 GET /api/dog/77471284 200 in 178ms
[ğŸ• /api/dog/77471284] Fetching dog details
dogId type: string value: 77471284
ğŸ• Checking database first for dog ID: 77471284
Searching for dog with petfinder_id: 77471284
Found dog in database: Larry
Database query result: Found
âœ… Found dog in database: Larry
Description length: 150
 GET /api/dog/77471284 200 in 246ms
 GET /adopt/77461380 200 in 49ms
 HEAD /adopt/77461380 200 in 53ms
[ğŸ• /api/dog/77461380] Fetching dog details
dogId type: string value: 77461380
ğŸ• Checking database first for dog ID: 77461380
Searching for dog with petfinder_id: 77461380
Found dog in database: Nellie
Database query result: Found
âœ… Found dog in database: Nellie
Description length: 117
 GET /api/dog/77461380 200 in 338ms
[ğŸ• /api/dog/77461380] Fetching dog details
dogId type: string value: 77461380
ğŸ• Checking database first for dog ID: 77461380
Searching for dog with petfinder_id: 77461380
Found dog in database: Nellie
Database query result: Found
âœ… Found dog in database: Nellie
Description length: 117
 GET /api/dog/77461380 200 in 240ms